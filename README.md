![Banner image](https://user-images.githubusercontent.com/10284570/173569848-c624317f-42b1-45a6-ab09-f0ea3c247648.png)

# n8n-nodes-starter

This repo contains example nodes to help you get started building your own custom integrations for [n8n](https://n8n.io). It includes the node linter and other dependencies.

To make your custom node available to the community, you must create it as an npm package, and [submit it to the npm registry](https://docs.npmjs.com/packages-and-modules/contributing-packages-to-the-registry).

## Prerequisites

You need the following installed on your development machine:

* [git](https://git-scm.com/downloads)
* Node.js and pnpm. Minimum version Node 20. You can find instructions on how to install both using nvm (Node Version Manager) for Linux, Mac, and WSL [here](https://github.com/nvm-sh/nvm). For Windows users, refer to Microsoft's guide to [Install NodeJS on Windows](https://docs.microsoft.com/en-us/windows/dev-environment/javascript/nodejs-on-windows).
* Install n8n with:
  ```
  npm install n8n -g
  ```
* Recommended: follow n8n's guide to [set up your development environment](https://docs.n8n.io/integrations/creating-nodes/build/node-development-environment/).

## Using this starter

These are the basic steps for working with the starter. For detailed guidance on creating and publishing nodes, refer to the [documentation](https://docs.n8n.io/integrations/creating-nodes/).

1. [Generate a new repository](https://github.com/n8n-io/n8n-nodes-starter/generate) from this template repository.
2. Clone your new repo:
   ```
   git clone https://github.com/<your organization>/<your-repo-name>.git
   ```
3. Run `npm i` to install dependencies.
4. Open the project in your editor.
5. Browse the examples in `/nodes` and `/credentials`. Modify the examples, or replace them with your own nodes.
6. Update the `package.json` to match your details.
7. Run `npm lint` to check for errors or `npm lintfix` to automatically fix errors when possible.
8. Test your node locally. Refer to [Run your node locally](https://docs.n8n.io/integrations/creating-nodes/test/run-node-locally/) for guidance.
9. Replace this README with documentation for your node. Use the [README_TEMPLATE](README_TEMPLATE.md) to get started.
10. Update the LICENSE file to use your details.
11. [Publish](https://docs.npmjs.com/packages-and-modules/contributing-packages-to-the-registry) your package to npm.

## More information

Refer to our [documentation on creating nodes](https://docs.n8n.io/integrations/creating-nodes/) for detailed information on building your own nodes.

## Available Nodes

### Gemini Chatbot

**Description:**
The Gemini Chatbot node acts as a conversational AI powered by Google's Gemini models. It takes a user's text prompt and returns both a textual AI response and an audio version of that response, simulating a voice-based chatbot interaction.

**Credentials:**
This node uses "Gemini API" credentials. Ensure you have these configured:
1. In n8n, go to **Credentials > New**.
2. Search for "Gemini API" (or the display name you've configured, e.g., "Gemini API Key").
3. Enter your Google Gemini API Key into the 'API Key' field.
4. Save the credential. It will be referred to as `geminiApi` internally.

**Input Properties:**
*   **Text Prompt (`prompt`):** The text message or question you want to send to the Gemini chatbot.
*   **Model Name (`modelName`):** Choose the Gemini model for the interaction.
    *   `models/gemini-1.5-flash-preview-native-audio-dialog`: Optimized for dialog with native audio capabilities.
    *   `models/gemini-1.5-flash-exp-native-audio-thinking-dialog`: An experimental version, potentially with different characteristics for dialog and audio.
*   **Voice Name (`voiceName`):** Select the voice for the AI's audio response (e.g., "Zephyr", "Charon"). The availability and characteristics of voices may depend on the chosen model and Google's API updates.
*   **Enable Grounding with Google Search (`enableGrounding`):** A boolean option (true/false). If enabled, the Gemini model can use Google Search to gather relevant information to inform its responses, making them more current and comprehensive.

**Output:**
The node provides the following outputs for each processed item:
*   **JSON Data:**
    *   `textPrompt`: The original text prompt sent by the user.
    *   `aiTextResponse`: The textual response generated by the Gemini model.
    *   `modelUsed`: The specific Gemini model that was used for the interaction.
    *   `voiceUsed`: The voice name selected for the audio output.
    *   `groundingEnabled`: Indicates whether Google Search grounding was enabled for the request.
    *   `warning` (optional): May appear if, for example, audio data could not be generated but a text response was provided.
*   **Binary Data:**
    *   `aiAudioResponse`: An audio file (typically MP3 or the format provided by the API, e.g., 'audio/mpeg') containing the AI's textual response converted to speech. This is present if the model successfully generates audio.

**Example Usage:**
1.  **Start Trigger:** Use a "Manual" trigger for testing, or any other trigger node (e.g., "Webhook", "Telegram Trigger") to receive user input.
2.  **Add Gemini Chatbot Node:**
    *   Select your configured "Gemini API" credential.
    *   In the "Text Prompt" field, enter static text (e.g., "Tell me a fun fact about space.") or use an expression to map input from a previous node (e.g., `{{ $json.userInput }}`).
    *   Choose your desired "Model Name" and "Voice Name" from the dropdowns.
    *   Decide whether to "Enable Grounding with Google Search".
3.  **Handle Outputs:**
    *   **Audio:** Connect the "Gemini Chatbot" node to a "Write Binary File" node to save the `aiAudioResponse` to a file. You could also send this audio to a messaging service that supports audio files.
    *   **Text:** Connect to a "Set" node to work with the `aiTextResponse` or other JSON fields, or send it to a messaging service, database, etc.
4.  **Execute Workflow:** Run the workflow. The Gemini Chatbot node will process the input, interact with the Gemini API, and output the AI's text and audio responses.

## License

[MIT](https://github.com/n8n-io/n8n-nodes-starter/blob/master/LICENSE.md)
